syntax = "proto3";

option csharp_namespace = "MixedDbDistributionTask";

package accessor;

service Accessor {
	rpc Ping(PingRequest) returns (PingReply);
	rpc GetPractices(PracticesRequest) returns (PracticesReply);
	rpc GetRemedies(RemedyRequest) returns (RemedyReply);
	rpc GetPatientsForPractice(PatientRequest) returns (PatientReply);
	rpc GetTherapist(TherapistRequest) returns (TherapistReply);
	rpc GetAppointmentsForPatientAtPractice(AppointmentRequest) returns (AppointmentReply);
	rpc GetAppointmentsForTherapist (AppointmentRequest) returns (AppointmentReply);
}

message PingRequest {
	string payload = 1;
}

message PingReply {
	string message = 1;
}

message PracticeDto {
	string ik = 1;
	string name = 2;
	string company = 3;
}

message PracticesRequest {
	repeated string iks = 1;
}

message PracticesReply {
	repeated PracticeDto practices = 1;
}

message RemedyDto {
	string diagnosis = 1;
	string name = 2;
	bool isFixed = 3;
}

message RemedyRequest {
	bool fixedOnly = 1;
}

message RemedyReply {
	repeated RemedyDto remedies = 1;
}

message PatientDto {
	string kvNummer = 1;
	PracticeDto practice = 2;
	string name = 3;
	int32 age = 4;
}

message PatientRequest {
	string practiceIk = 1;
}

message PatientReply {
	repeated PatientDto patients = 1;
}

message TherapistDto {
	string id = 1;
	string name = 2;
}

message TherapistRequest {
	string id = 1;
}

message TherapistReply {
	TherapistDto therapist = 1;
}

message AppointmentDto {
	string id = 1;
	string startTime = 2;
	string endTime = 3;
	TherapistDto therapist = 4;
	PatientDto patient = 5;
	PracticeDto practice = 6;
	RemedyDto remedy = 7;
}

message AppointmentRequest {
	string patientKv = 1;
	string practiceIk = 2;
	string therapistId = 3;
}

message AppointmentReply {
	repeated AppointmentDto appointments = 1;
}